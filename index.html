<html>

<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="style.css">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
<audio id="sound" src="pop.mp3" preload="auto"></audio>
<script>
  var socket = io();
  var name = ""
  $("#container").hide();
  $('.clear').hide();
  function buzz(){
	socket.emit("buzz",name);
	return false;
	
  }
  function clearbuzzer(){
	socket.emit("clear","asdf");
	return false;
	
  }
  function checkname(){
	name = prompt('What is your username');
	socket.emit("check name", name);
	return false;
	
  }
  
  socket.on('locked', function(msg){
    $('#buzzbutton').addClass('locked').removeClass('default').text('Locked').prop("disabled",true);
	$('#container').show(250).text(msg+ " has buzzed");
	$('.clear').hide();
  });
  
  socket.on('your buzz', function(msg){
    $('#buzzbutton').addClass('buzzed').removeClass('default').text('Your Buzz').prop("disabled",true);
	$('.clear').show();
	document.getElementById("sound").play();
  });
  
  socket.on('clear', function(msg){
    $('#buzzbutton').addClass('default').removeClass('buzzed').removeClass('locked').text('Buzz').prop("disabled",false);
	$('#container').hide(250).text("");
	$('.clear').hide();
  });
  socket.on('bad name', function(msg){
    alert("Username already taken");
	checkname();
  });
  checkname();
</script>

</head>
<body>
	<div id ="wrapper">
		<div id="container" style="display:none"></div>
	
	<br>
	<button id="buzzbutton" class="default" onclick = "buzz()">
		Buzz
	</button>
	<br>
	<button class="clear" onclick="clearbuzzer()" style="display:none">
		Clear
	</button>
	</div>
</body>
</html>